
<div >

  <div style="background: #FFF;">
     <div class="container-fluid">
				<div class="manage account-manage info-center">
					<div class="page-header">
                        <div class="pull-left">
						    <h4>产品管理</h4>
					    </div>
                    </div>
                    <form id="addProduct">
                        <dl class="account-basic clearfix">
                            <dd class="pull-left margin-large-left margin-small-top">
                            <p class="text-small">
                                <span class="show pull-left base-name">产品名称</span>
                                <span class="margin-left"><input type="text" id="name" name="name" style="width:250px"/></span>
                            </p>
                            <p class="text-small">
                                <span class="show pull-left base-name">起始额度</span>
                                <span class="margin-left"><input type="text" onkeyup='this.value=this.value.replace(/\D/gi,"")' id="startAmount" name="startAmount" style="width:250px"/>（元）</span>
                            </p>
                            <p class="text-small">
                                <span class="show pull-left base-name">截止额度</span>
                                <span class="margin-left"><input type="text" onkeyup='this.value=this.value.replace(/\D/gi,"")' id="endAmount" name="endAmount" style="width:250px"/>（元）</span>
                            </p>
                            <p class="text-small">
                                <span class="show pull-left base-name">期限类型</span>
                                <span class="margin-left">
                                    <input type="radio" name="periodType" value="day"/>天
                                    <input type="radio" name="periodType" value="month" checked="checked"/>月
                                </span>
                            </p>
                            <p class="text-small">
                                <span class="show pull-left base-name">起始期限</span>
                                <span class="margin-left"><input type="text" onkeyup='this.value=this.value.replace(/\D/gi,"")' id="startPeriod" name="startPeriod" style="width:250px"/></span>
                            </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">截止期限</span>
                                    <span class="margin-left"><input type="text" onkeyup='this.value=this.value.replace(/\D/gi,"")' id="endPeriod" name="endPeriod" style="width:250px"/></span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">列表图片</span>
                                    <span class="margin-left">
                                        <input id="listFileHide" type="hidden" value="" name="img" style="width:250px;top:50px"/>
                                        <label for="listFile"><img id="listFileImg" src="img/upload.png"  name="img" style="width:114px;height:114px"/></label>
                                        <input id="listFile" type="file" name="file" onchange="productImgUpload(this)" style="display: none"/>
                                    </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">推荐图片</span>
                                    <span class="margin-left">
                                        <input id="recommendFileHide" type="hidden" value="" name="recommendImg" style="width:250px;top:50px"/>
                                        <label for="recommendFile"><img id="recommendFileImg" src="img/upload.png"  style="width:114px;height:114px"/></label>
                                        <input id="recommendFile" type="file" name="file" onchange="productImgUpload(this)" style="display: none"/>
                                </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">申请条件</span>
                                    <span class="margin-left"><textarea cols="50" rows="5" id="applyCondition" name="applyCondition"></textarea></span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">申请流程</span>
                                    <span class="margin-left"><textarea cols="50" rows="5" id="applyFlow" name="applyFlow"></textarea></span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">是否新产品</span>
                                    <span class="margin-left">
                                        <select id="productType" name="productType">
                                             <option value="xkz">新口子</option>
                                             <option value="">老商户</option>
                                         </select>
                                    </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">产品特性</span>
                                    <span class="margin-left">
                                        <select id="isRecommend" name="isRecommend">
                                             <option value="0">默认</option>
                                             <option value="1">热门推荐</option>
                                             <option value="2">精品推荐</option>
                                             <option value="3">最新口子</option>
                                         </select>
                                    </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">产品类型</span>
                                    <span class="margin-left">
                                        <select id="sourceType" name="sourceType">
                                             <option value="salaryloan">工薪贷</option>
                                             <option value="xiaoejishuloan">小额极速借款</option>
                                             <option value="diyaloan">抵押贷款</option>
                                             <option value="creditcardloan">信用贷款</option>
                                         </select>
                                    </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">后台地址</span>
                                    <span class="margin-left"><input type="text" name="backendLoginUrl" style="width:250px"/></span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">用户名</span>
                                    <span class="margin-left"><input type="text" name="loginUser" style="width:250px"/></span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">密码</span>
                                    <span class="margin-left"><input type="text" name="loginPwd" style="width:250px"/></span>
                                </p>
                            </dd>
                             <dd class="pull-left margin-large-left margin-small-top">
                                <p class="text-small">
                                    <span class="show pull-left base-name">利率</span>
                                    <span class="margin-left"><input type="text"  onkeyup="value=value.replace(/[^\d.]/g,'')" id="serviceRate" name="serviceRate" style="width:250px"/>(%)</span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">利率说明</span>
                                    <span class="margin-left"><input type="text" id="rateMemo" name="rateMemo" style="width:250px"/></span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">放款天数</span>
                                    <span class="margin-left"><input type="text" onkeyup='this.value=this.value.replace(/\D/gi,"")' id="loanDay" name="loanDay" style="width:250px"/>（天）</span>
                                </p>
                                 <p class="text-small">
                                     <span class="show pull-left base-name">来源渠道</span>
                                     <span class="margin-left"><input type="text" name="channel" id="sourceChannel" style="width:250px"/></span>
                                 </p>
                                 <p class="text-small">
                                     <span class="show pull-left base-name">H5Url</span>
                                     <span class="margin-left"><input type="text" name="url" id="url" style="width:250px"/></span>
                                 </p>
                                 <p class="text-small">
                                     <span class="show pull-left base-name">详情图片</span>
                                     <input id="detailFileHide" type="hidden" value="" name="detailImg" style="width:250px;top:50px"/>
                                     <label for="detailFile"><img id="detailFileImg" src="img/upload.png" style="width:114px;height:114px"/></label>
                                     <span class="margin-left">
                                         <form id="detailForm">
                                            <input id="detailFile" type="file" name="file" onchange="productImgUpload(this)" style="display: none"/>
                                         </form>
                                    </span>
                                 </p>
                                 <p class="text-small">
                                     <span class="show pull-left base-name">所需材料</span>
                                     <span class="margin-left"><textarea cols="50" rows="5" id="applyMaterial" name="applyMaterial"></textarea></span>
                                 </p>
                                 <p class="text-small">
                                     <span class="show pull-left base-name">投放渠道</span>
                                     <span class="margin-left">
                                          <input type="checkbox" id="appleFlag" name="appleFlag" value="true"/>苹果&nbsp;&nbsp;
                                          <input type="checkbox" id="androidFlag" name="androidFlag" value="true"/>安卓&nbsp;&nbsp;
                                          <input type="checkbox" id="wechatFlag" name="wechatFlag" value="true"/>微信端
                                     </span>
                                 </p>
                                 <p class="text-small">
                                     <span class="show pull-left base-name">所属app</span>
                                     <span class="margin-left">
                                         <a href="javascript:void(0)" onclick="checkBelongApp()"><font color="red">全选</font></a>
                                         <span id="appList"></span>
                                         </span>
                                 </p>
                                 <p class="text-small">
                                     <span class="show pull-left base-name">合作模式</span>
                                     <span class="margin-left">
                                         <select id="cooperationModel" name="cooperationModel">
                                             <option value="CPA">CPA</option>
                                             <option value="CPS">CPS</option>
                                             <option value="CPA+CPS">CPA+CPS</option>
                                         </select>
                                     </span>
                                 </p>
                                 <p class="text-small">
                                     <span class="show pull-left base-name">合作价格</span>
                                     <span class="margin-left"><textarea cols="50" rows="5" name="unitPrice"></textarea></span>
                                 </p>
                                 <p class="text-small">
                                     <span class="show pull-left base-name">下载APP</span>
                                     <span class="margin-left">
                                          <input type="radio" name="isDownloadApp" value="true"/>是&nbsp;&nbsp;
                                          <input type="radio" name="isDownloadApp" value="false"/>否&nbsp;&nbsp;
                                     </span>
                                 </p>
                            </dd>
                            <dd class="pull-left margin-large-left margin-small-top">
                                <p class="text-small">
                                    <span class="show pull-left base-name">产品描述</span>
                                    <span class="margin-left"><textarea cols="50" rows="5" id="productDesc" name="productDesc"></textarea></span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">产品标签(以分号[;]分割)</span>
                                    <span class="margin-left"><textarea cols="50" rows="5"id="productLabel" name="productLabel"></textarea></span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">结算方式</span>
                                    <span class="margin-left">
                                         <span class="margin-left">
                                             <input type="radio" name="settleCycle" value="1"/>日结&nbsp;&nbsp;
                                             <input type="radio" name="settleCycle" value="2"/>周结&nbsp;&nbsp;
                                             <input type="radio" name="settleCycle" value="3"/>月结&nbsp;&nbsp;
                                         </span>
                                     </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">发票抬头</span>
                                    <span class="margin-left">
                                         <span class="margin-left"><input type="text" name="accountName" style="width:250px"/></span>
                                     </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">开户银行</span>
                                    <span class="margin-left">
                                         <span class="margin-left"><input type="text" name="openBankName" style="width:250px"/></span>
                                     </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">银行账号</span>
                                    <span class="margin-left">
                                         <span class="margin-left"><input type="text" name="bankAccount" style="width:250px"/></span>
                                     </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">公司地址</span>
                                    <span class="margin-left">
                                         <span class="margin-left"><input type="text" name="linkAddress" style="width:250px"/></span>
                                     </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">公司电话</span>
                                    <span class="margin-left">
                                         <span class="margin-left"><input type="text" name="linkPhone" style="width:250px"/></span>
                                     </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">识别号</span>
                                    <span class="margin-left">
                                         <span class="margin-left"><input type="text" name="taxpayerNo" style="width:250px"/></span>
                                     </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">邮寄地址</span>
                                    <span class="margin-left">
                                         <span class="margin-left"><input type="text" name="invoiceLinkAddress" style="width:250px"/></span>
                                     </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">收件电话</span>
                                    <span class="margin-left">
                                         <span class="margin-left"><input type="text" name="invoiceLinkPhone" style="width:250px"/></span>
                                     </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">发票类型</span>
                                    <span class="margin-left">
                                         <input type="radio" name="invoiceType" value="1"/>专票&nbsp;&nbsp;
                                         <input type="radio" name="invoiceType" value="0"/>普票&nbsp;&nbsp;
                                     </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">开票名目</span>
                                    <span class="margin-left">
                                         <span class="margin-left"><input type="text" name="invoiceItem" style="width:250px"/></span>
                                     </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">税金支付方</span>
                                    <span class="margin-left">
                                         <span class="margin-left">
                                              <input type="radio" name="taxesObject" value="1"/>收款方&nbsp;&nbsp;
                                              <input type="radio" name="taxesObject" value="0"/>支付方&nbsp;&nbsp;
                                         </span>
                                     </span>
                                </p>
                                <p class="text-small">
                                    <span class="show pull-left base-name">开票备注</span>
                                    <span class="margin-left">
                                         <span class="margin-left">
                                             <textarea cols="50" rows="5" name="invoiceMemo"></textarea>
                                         </span>
                                     </span>
                                </p>
                            </dd>
                        </dl>
                        <dd class="pull-left margin-large-left margin-small-top">
                            <p class="text-small">
                                <input type="button" value="保存" style="width: 150px;" onclick="javascript:saveProduct()"/>
                            </p>
                        </dd>
                    </form>
				</div>
		</div>
  </div>
</div>
<script type="text/javascript">
$(function(){
    var param = "type=bannerPosition";
    var result = get(appUrl,param);
    var resultData = result.data;
    var sTrHtml = "";
    $.each(resultData, function (j) {
        sTrHtml += "<input type=\"checkbox\" name=\"belongApp\" value=\""+resultData[j].code+"\"/>";
        sTrHtml += resultData[j].name+"&nbsp;&nbsp;";
        if(j%4==0){
            sTrHtml += "<br>";
        }
    });
    $("#appList").append(sTrHtml);
});
//图片上传
function productImgUpload(obj) {
    var objId = obj.id;
    var fileId = objId.replace("Upload","");
    uploadFile(fileId);
}
function setShowOrder(){
    var textOrderSql = $("#allSeq").val();
    if(textOrderSql==undefined||textOrderSql==""){
        showTipMessage("请设置排序号",false);
    }else{
        $.each($("input:text"), function(i,val){
            var name = val.name;
            if(name.indexOf("showOrder")!=-1){
                val.value=textOrderSql;
            }
        });
    }
}
//保存产品
function saveProduct() {
    var data = $("#addProduct").serializeArray();
    var values={};
    for (var item in data) {
        if(values[data[item].name]!=null||values[data[item].name]!=undefined) {
            values[data[item].name] = values[data[item].name]+","+data[item].value.trim();
        }else{
            values[data[item].name] = data[item].value.trim();
        }
    }
    if($("#name").val()==undefined||$("#name").val()==''){
        showTipMessage("请填写产品名称",false);
        return false;
    }
    if($("#startAmount").val()==undefined||$("#startAmount").val()==''){
        showTipMessage("请填写起始额度",false);
        return false;
    }
    if($("#endAmount").val()==undefined||$("#endAmount").val()==''){
        showTipMessage("请填写截止额度",false);
        return false;
    }
    if($("#startPeriod").val()==undefined||$("#startPeriod").val()==''){
        showTipMessage("请填写起始期限",false);
        return false;
    }
    if($("#endPeriod").val()==undefined||$("#endPeriod").val()==''){
        showTipMessage("请填写截止期限",false);
        return false;
    }
    if($("#serviceRate").val()==undefined||$("#serviceRate").val()==''){
        showTipMessage("请填写利率",false);
        return false;
    }
    if($("#rateMemo").val()==undefined||$("#rateMemo").val()==''){
        showTipMessage("请填写利率说明",false);
        return false;
    }
    if($("#loanDay").val()==undefined||$("#loanDay").val()==''){
        showTipMessage("请填写放款天数",false);
        return false;
    }
    if($("#sourceChannel").val()==undefined||$("#sourceChannel").val()==''){
        showTipMessage("请填写来源渠道",false);
        return false;
    }
    if($("#url").val()==undefined||$("#url").val()==''){
        showTipMessage("请填写跳转地址",false);
        return false;
    }
    if($("#listFileHide").val()==undefined||$("#listFileHide").val()==''){
        showTipMessage("请上传列表图片",false);
        return false;
    }
    if($("#detailFileHide").val()==undefined||$("#detailFileHide").val()==''){
        showTipMessage("请上传详情图片",false);
        return false;
    }
    if($("#applyCondition").val()==undefined||$("#applyCondition").val()==''){
        showTipMessage("请填写申请条件",false);
        return false;
    }
    if($("#applyFlow").val()==undefined||$("#applyFlow").val()==''){
        showTipMessage("请填写申请流程",false);
        return false;
    }
    if($("#applyMaterial").val()==undefined||$("#applyMaterial").val()==''){
        showTipMessage("请填写申请材料",false);
        return false;
    }
    if($("#productDesc").val()==undefined||$("#productDesc").val()==''){
        showTipMessage("请填写产品描述",false);
        return false;
    }

    var result = post(saveProductUrl,values);
    if(result.success){
        cwLoad("product/productlist.html");
    }else{
        showTipMessage(result.message,true);
    }
}
</script>
